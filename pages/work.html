<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="index, follow">

    <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Person",
            "name": "Jeral Sandeeptha",
            "url": "https://jeral.onrender.com/",
            "jobTitle": "Software Engineer",
            "description": "Professional software engineer specializing in full-stack development, mobile apps, and web design.",
            "sameAs": [
                "https://www.linkedin.com/in/jeralsandeeptha",
                "https://github.com/JeralSandeeptha",
                "https://www.instagram.com/mnjerals/",
                "https://www.facebook.com/people/Jeral-Sandeeptha/pfbid0kjEAnPRX6xx7cG8idG6DsjKYynswLys33WYyFXCNHtRgWD99VgjkBJRPnYxSueaGl/"
            ],
            "contactPoint": {
                "@type": "ContactPoint",
                "telephone": "+94-778250712",
                "contactType": "Customer Service",
                "areaServed": "LK",
                "availableLanguage": "English"
            },
            "address": {
                "@type": "PostalAddress",
                "streetAddress": "No.314/14H, Hettiyawatta, Elapitiwala, Ragama.",
                "addressLocality": "Ragama",
                "addressRegion": "Western",
                "postalCode": "11010",
                "addressCountry": "LK"
            }
        }
    </script>
    
    <link rel="stylesheet" href="../styles/globals/global.css">
    <link rel="stylesheet" href="../styles/components/navbar/navbar.css">
    <link rel="stylesheet" href="../styles/components/posts/posts.css">
    <link rel="stylesheet" href="../styles/components/footer-lower/footer-lower.css">
    <link rel="stylesheet" href="../styles/components/footer-upper/footer-upper.css">
    <link rel="stylesheet" href="../styles/components/work-header/work-header.css">
    <title>Work</title>
    <meta name="theme-color" content="#000000">
    <link rel="icon" href="../assets/images/logo.jpg" type="image/x-icon">
</head>
<body>

    <!-- cursor -->
    <div class="cursor"></div>
    
    <!-- navbar -->
    <div class="jeral navbar">
        <div class="jeral navbar-inner">
            <a href="../index.html">
                <h4 class="jeral logo">Jeral.<span class="span">Sandeeptha</span>
                </h4>
            </a>
            <div class="jeral nav-links">
                <a href="work.html" class="jeral nav-link">Work</a>
                <a href="about.html" class="jeral nav-link">About</a>
                <a href="lab.html" class="jeral nav-link">Lab</a>
                <a href="contact.html" class="jeral nav-link">Contact</a>
            </div>
        </div>
    </div>

    <!-- header for works -->
    <div class="jeral work-header">
        <div class="jeral work-header-inner">
            <h1 class="jeral work-header-title">My Projects</h1>
        </div>    
    </div>

    <!-- posts section -->
    <div class="posts jeral">
        <div class="posts-inner jeral" id="posts-inner">
            
        </div>
    </div>

    <!-- footer-upper -->
    <div class="jeral footer-upper">
        <div class="jeral footer-upper-inner">
            <div class="jeral left">
                <h1 class="jeral footer-upper-header">
                    Interested in working with me?
                </h1>
                <h1 class="jeral footer-upper-description">Together, we hold the power to <br>  design the world that we envision</h1>
            </div>
            <div class="jeral right">
                <h4 class="jeral location">7.8731° N, 80.7718° E</h4>
                <h4 class="jeral country">Remote from Sri Lanka</h4>
            </div>
        </div>
    </div>

    <!-- footer-lower -->
    <div class="jeral footer-lower">
        <div class="jeral footer-lower-inner">
            <div class="jeral upper">
                <div class="jeral left">
                    <h5 class="jeral message-title">
                        Send a message
                    </h5>
                    <h5 class="jeral email">jeral.sandeeptha1@gmail.com</h5>
                </div>
                <div class="jeral right">
                    <div class="jeral up">
                        <a href="https://www.linkedin.com/in/jeral-sandeeptha-983b38253/">
                            <h5 class="jeral social">↗ Linkedin</h5>
                        </a>
                        <a href="https://www.instagram.com/mnjerals/">
                            <h5 class="jeral social">↗ Instagram</h5>
                        </a>
                        <a href="https://web.facebook.com/profile.php?id=100081695827577">
                            <h5 class="jeral social">↗ Facebook</h5>
                        </a>
                        <a href="https://wa.me/0778250712">
                            <h5 class="jeral social">↗ Whatsapp</h5>
                        </a>
                    </div>
                    <div class="jeral down">
                        <h4 class="jeral text">Work by Jeral.</h4>
                        <h4 class="jeral text">Lab by Jeral.</h4>
                    </div>
                </div>
            </div>
            <div class="jeral downer">
                <h6 class="jeral copyright">
                    Copyright © <span>0000</span> Jeral.Sandeeptha. All rights reserved.
                </h6>
                <h6 class="jeral dev">
                    Design & Development by Jeral.Sandeeptha
                </h6>
            </div>
        </div>
    </div>

    <script src="https://unpkg.com/@studio-freight/lenis@1.0.42/dist/lenis.min.js"></script> 
    <script
    src="https://code.jquery.com/jquery-3.7.1.min.js"
    integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
    crossorigin="anonymous"></script>
    <script src="../js/functions/setYear.js"></script>
    <script src="../js/functions/lenis-initialize.js"></script>
    <!-- <script src="../js/api/getPosts.js"></script> -->

    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <script>
        $(document).ready(function() {
            // Function to fetch posts using GROQ query
            function fetchPosts() {
                // Replace with your actual GROQ query
                var groqQuery = `*[_type == 'post']{_id, title, description, slug, coverImage, createDate}`;

                // Fetch data from Sanity.io using fetch API
                fetch('https://m8cpirme.api.sanity.io/v1/data/query/production', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        query: `*[_type == 'post']{_id, title, description, slug, coverImage, createDate}`
                    }),
                })
                .then(response => response.json())
                .then(data => {
                    //console.log(data.result);
                    // Iterate over fetched data and generate HTML for each post
                    data.result.forEach(post => {
                        var postHTML = '<div class="jeral post">';
                        postHTML += '<h2 class="jeral title">' + post.title + '</h2>';
                        postHTML += '<h5 class="jeral date">' + new Date(post.createDate).toLocaleDateString() + '</h5>';
                        postHTML += '<h6 class="jeral slug">' + post.slug.current + '</h6>';
                        
                        // Check if cover image exists and add it to HTML
                        if (post.coverImage && post.coverImage.asset._ref) {
                            var assetRef = post.coverImage.asset._ref;
                            var imageUrl = `https://cdn.sanity.io/images/m8cpirme/production/${assetRef.split('-')[1]}-${assetRef.split('-')[2]}.jpg`;
                            postHTML += `<img src="${imageUrl}" alt="Cover Image" class="jeral postImage">`;
                        }

                        //console.log(imageUrl); 
                
                        postHTML += '<p class="jeral description">' + post.description + '</p>';
                        postHTML += '</div>';
                
                        // Append post HTML to posts-inner div
                        $('#posts-inner').append(postHTML);
                    });
                })
                .catch(error => console.error('Error fetching posts:', error));
            }

            // Call fetchPosts function when document is ready
            fetchPosts();
        });
    </script>
    
</body>
</html>